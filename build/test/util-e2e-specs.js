"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("source-map-support/register");
var _bluebird = _interopRequireDefault(require("bluebird"));
var _chai = _interopRequireDefault(require("chai"));
var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));
var _path = _interopRequireDefault(require("path"));
var util = _interopRequireWildcard(require("../lib/util"));
var _index = require("../index");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
_chai.default.should();
_chai.default.use(_chaiAsPromised.default);
describe('#util', function () {
  let tmpRoot;
  let tmpFile;
  const content = 'YOLO';
  beforeEach(async function () {
    tmpRoot = await _index.tempDir.openDir();
    tmpFile = _path.default.resolve(tmpRoot, 'example.txt');
    await _index.fs.writeFile(tmpFile, content, 'utf8');
  });
  afterEach(async function () {
    if (tmpRoot) {
      await _index.fs.rimraf(tmpRoot);
    }
    tmpRoot = null;
  });
  describe('toInMemoryBase64()', function () {
    it('should convert a file to base64 encoding', async function () {
      const data = await util.toInMemoryBase64(tmpFile);
      const fileContent = await _index.fs.readFile(tmpFile);
      data.toString().should.eql(fileContent.toString('base64'));
    });
  });
  describe('getLockFileGuard()', function () {
    let tmpRoot;
    let lockFile;
    let testFile;
    async function guardedBehavior(text, msBeforeActing) {
      await _bluebird.default.delay(msBeforeActing);
      await _index.fs.appendFile(testFile, text, 'utf8');
      return text;
    }
    async function testFileContents() {
      return (await _index.fs.readFile(testFile)).toString('utf8');
    }
    beforeEach(async function () {
      tmpRoot = await _index.tempDir.openDir();
      lockFile = _path.default.resolve(tmpRoot, 'test.lock');
      testFile = _path.default.resolve(tmpRoot, 'test');
      await _index.fs.writeFile(testFile, 'a', 'utf8');
    });
    afterEach(async function () {
      try {
        await _bluebird.default.all([lockFile, testFile].map(p => _index.fs.unlink(p)));
      } catch (ign) {}
    });
    it('should lock a file during the given behavior', async function () {
      const guard = util.getLockFileGuard(lockFile);
      await guard.check().should.eventually.be.false;
      const guardPromise = guard(async () => await guardedBehavior('b', 500));
      await _bluebird.default.delay(200);
      await guard.check().should.eventually.be.true;
      await guardPromise;
      await guard.check().should.eventually.be.false;
      await testFileContents().should.eventually.eql('ab');
    });
    it('should recover a broken lock file', async function () {
      await _index.fs.writeFile(lockFile, 'dummy', 'utf8');
      const guard = util.getLockFileGuard(lockFile, {
        timeout: 3,
        tryRecovery: true
      });
      await guard(async () => await guardedBehavior('b', 500));
      await guard.check().should.eventually.be.false;
      await testFileContents().should.eventually.eql('ab');
    });
    it('should block other behavior until the lock is released', async function () {
      await testFileContents().should.eventually.eql('a');
      const unguardedPromise1 = guardedBehavior('b', 500);
      const unguardedPromise2 = guardedBehavior('c', 100);
      await unguardedPromise1;
      await unguardedPromise2;
      await testFileContents().should.eventually.eql('acb');
      const guard = util.getLockFileGuard(lockFile);
      const guardPromise1 = guard(async () => await guardedBehavior('b', 500));
      const guardPromise2 = guard(async () => await guardedBehavior('c', 100));
      await guardPromise1;
      await guardPromise2;
      await testFileContents().should.eventually.eql('acbbc');
    });
    it('should return the result of the guarded behavior', async function () {
      const guard = util.getLockFileGuard(lockFile);
      const guardPromise1 = guard(async () => await guardedBehavior('hello', 500));
      const guardPromise2 = guard(async () => await guardedBehavior('world', 100));
      const ret1 = await guardPromise1;
      const ret2 = await guardPromise2;
      ret1.should.eql('hello');
      ret2.should.eql('world');
    });
    it('should time out if the lock is not released', async function () {
      this.timeout(5000);
      const guard = util.getLockFileGuard(lockFile, {
        timeout: 0.5
      });
      const p1 = guard(async () => await guardedBehavior('hello', 1200));
      const p2 = guard(async () => await guardedBehavior('world', 10));
      await p2.should.eventually.be.rejectedWith(/not acquire lock/);
      await p1.should.eventually.eql('hello');
    });
    it('should still release lock if guarded behavior fails', async function () {
      this.timeout(5000);
      const guard = util.getLockFileGuard(lockFile);
      const p1 = guard(async () => {
        await _bluebird.default.delay(500);
        throw new Error('bad');
      });
      const p2 = guard(async () => await guardedBehavior('world', 100));
      await p1.should.eventually.be.rejectedWith(/bad/);
      await p2.should.eventually.eql('world');
    });
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC91dGlsLWUyZS1zcGVjcy5qcyIsIm5hbWVzIjpbIl9ibHVlYmlyZCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoYWkiLCJfY2hhaUFzUHJvbWlzZWQiLCJfcGF0aCIsInV0aWwiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9pbmRleCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsImNoYWkiLCJzaG91bGQiLCJ1c2UiLCJjaGFpQXNQcm9taXNlZCIsImRlc2NyaWJlIiwidG1wUm9vdCIsInRtcEZpbGUiLCJjb250ZW50IiwiYmVmb3JlRWFjaCIsInRlbXBEaXIiLCJvcGVuRGlyIiwicGF0aCIsInJlc29sdmUiLCJmcyIsIndyaXRlRmlsZSIsImFmdGVyRWFjaCIsInJpbXJhZiIsIml0IiwiZGF0YSIsInRvSW5NZW1vcnlCYXNlNjQiLCJmaWxlQ29udGVudCIsInJlYWRGaWxlIiwidG9TdHJpbmciLCJlcWwiLCJsb2NrRmlsZSIsInRlc3RGaWxlIiwiZ3VhcmRlZEJlaGF2aW9yIiwidGV4dCIsIm1zQmVmb3JlQWN0aW5nIiwiQiIsImRlbGF5IiwiYXBwZW5kRmlsZSIsInRlc3RGaWxlQ29udGVudHMiLCJhbGwiLCJtYXAiLCJwIiwidW5saW5rIiwiaWduIiwiZ3VhcmQiLCJnZXRMb2NrRmlsZUd1YXJkIiwiY2hlY2siLCJldmVudHVhbGx5IiwiYmUiLCJmYWxzZSIsImd1YXJkUHJvbWlzZSIsInRydWUiLCJ0aW1lb3V0IiwidHJ5UmVjb3ZlcnkiLCJ1bmd1YXJkZWRQcm9taXNlMSIsInVuZ3VhcmRlZFByb21pc2UyIiwiZ3VhcmRQcm9taXNlMSIsImd1YXJkUHJvbWlzZTIiLCJyZXQxIiwicmV0MiIsInAxIiwicDIiLCJyZWplY3RlZFdpdGgiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiLi4vLi4iLCJzb3VyY2VzIjpbInRlc3QvdXRpbC1lMmUtc3BlY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vbGliL3V0aWwnO1xuaW1wb3J0IHsgdGVtcERpciwgZnMgfSBmcm9tICcuLi9pbmRleCc7XG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmRlc2NyaWJlKCcjdXRpbCcsIGZ1bmN0aW9uICgpIHtcbiAgbGV0IHRtcFJvb3Q7XG4gIGxldCB0bXBGaWxlO1xuICBjb25zdCBjb250ZW50ID0gJ1lPTE8nO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIHRtcFJvb3QgPSBhd2FpdCB0ZW1wRGlyLm9wZW5EaXIoKTtcbiAgICB0bXBGaWxlID0gcGF0aC5yZXNvbHZlKHRtcFJvb3QsICdleGFtcGxlLnR4dCcpO1xuICAgIGF3YWl0IGZzLndyaXRlRmlsZSh0bXBGaWxlLCBjb250ZW50LCAndXRmOCcpO1xuICB9KTtcblxuICBhZnRlckVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGlmICh0bXBSb290KSB7XG4gICAgICBhd2FpdCBmcy5yaW1yYWYodG1wUm9vdCk7XG4gICAgfVxuICAgIHRtcFJvb3QgPSBudWxsO1xuICB9KTtcblxuICBkZXNjcmliZSgndG9Jbk1lbW9yeUJhc2U2NCgpJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgY29udmVydCBhIGZpbGUgdG8gYmFzZTY0IGVuY29kaW5nJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHV0aWwudG9Jbk1lbW9yeUJhc2U2NCh0bXBGaWxlKTtcbiAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUodG1wRmlsZSk7XG4gICAgICBkYXRhLnRvU3RyaW5nKCkuc2hvdWxkLmVxbChmaWxlQ29udGVudC50b1N0cmluZygnYmFzZTY0JykpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0TG9ja0ZpbGVHdWFyZCgpJywgZnVuY3Rpb24gKCkge1xuICAgIGxldCB0bXBSb290O1xuICAgIGxldCBsb2NrRmlsZTtcbiAgICBsZXQgdGVzdEZpbGU7XG5cbiAgICBhc3luYyBmdW5jdGlvbiBndWFyZGVkQmVoYXZpb3IgKHRleHQsIG1zQmVmb3JlQWN0aW5nKSB7XG4gICAgICBhd2FpdCBCLmRlbGF5KG1zQmVmb3JlQWN0aW5nKTtcbiAgICAgIGF3YWl0IGZzLmFwcGVuZEZpbGUodGVzdEZpbGUsIHRleHQsICd1dGY4Jyk7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiB0ZXN0RmlsZUNvbnRlbnRzICgpIHtcbiAgICAgIHJldHVybiAoYXdhaXQgZnMucmVhZEZpbGUodGVzdEZpbGUpKS50b1N0cmluZygndXRmOCcpO1xuICAgIH1cblxuICAgIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgdG1wUm9vdCA9IGF3YWl0IHRlbXBEaXIub3BlbkRpcigpO1xuICAgICAgbG9ja0ZpbGUgPSBwYXRoLnJlc29sdmUodG1wUm9vdCwgJ3Rlc3QubG9jaycpO1xuICAgICAgdGVzdEZpbGUgPSBwYXRoLnJlc29sdmUodG1wUm9vdCwgJ3Rlc3QnKTtcbiAgICAgIGF3YWl0IGZzLndyaXRlRmlsZSh0ZXN0RmlsZSwgJ2EnLCAndXRmOCcpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IEIuYWxsKFtsb2NrRmlsZSwgdGVzdEZpbGVdLm1hcCgocCkgPT4gZnMudW5saW5rKHApKSk7XG4gICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvY2sgYSBmaWxlIGR1cmluZyB0aGUgZ2l2ZW4gYmVoYXZpb3InLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBndWFyZCA9IHV0aWwuZ2V0TG9ja0ZpbGVHdWFyZChsb2NrRmlsZSk7XG4gICAgICBhd2FpdCBndWFyZC5jaGVjaygpLnNob3VsZC5ldmVudHVhbGx5LmJlLmZhbHNlO1xuICAgICAgY29uc3QgZ3VhcmRQcm9taXNlID0gZ3VhcmQoYXN5bmMgKCkgPT4gYXdhaXQgZ3VhcmRlZEJlaGF2aW9yKCdiJywgNTAwKSk7XG4gICAgICBhd2FpdCBCLmRlbGF5KDIwMCk7XG4gICAgICBhd2FpdCBndWFyZC5jaGVjaygpLnNob3VsZC5ldmVudHVhbGx5LmJlLnRydWU7XG4gICAgICBhd2FpdCBndWFyZFByb21pc2U7XG4gICAgICBhd2FpdCBndWFyZC5jaGVjaygpLnNob3VsZC5ldmVudHVhbGx5LmJlLmZhbHNlO1xuICAgICAgYXdhaXQgdGVzdEZpbGVDb250ZW50cygpLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnYWInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVjb3ZlciBhIGJyb2tlbiBsb2NrIGZpbGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUobG9ja0ZpbGUsICdkdW1teScsICd1dGY4Jyk7XG4gICAgICBjb25zdCBndWFyZCA9IHV0aWwuZ2V0TG9ja0ZpbGVHdWFyZChsb2NrRmlsZSwge1xuICAgICAgICB0aW1lb3V0OiAzLFxuICAgICAgICB0cnlSZWNvdmVyeTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgZ3VhcmQoYXN5bmMgKCkgPT4gYXdhaXQgZ3VhcmRlZEJlaGF2aW9yKCdiJywgNTAwKSk7XG4gICAgICBhd2FpdCBndWFyZC5jaGVjaygpLnNob3VsZC5ldmVudHVhbGx5LmJlLmZhbHNlO1xuICAgICAgYXdhaXQgdGVzdEZpbGVDb250ZW50cygpLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnYWInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYmxvY2sgb3RoZXIgYmVoYXZpb3IgdW50aWwgdGhlIGxvY2sgaXMgcmVsZWFzZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBmaXJzdCBwcm92ZSB0aGF0IHdpdGhvdXQgYSBsb2NrLCB3ZSBnZXQgcmFjZXNcbiAgICAgIGF3YWl0IHRlc3RGaWxlQ29udGVudHMoKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ2EnKTtcbiAgICAgIGNvbnN0IHVuZ3VhcmRlZFByb21pc2UxID0gZ3VhcmRlZEJlaGF2aW9yKCdiJywgNTAwKTtcbiAgICAgIGNvbnN0IHVuZ3VhcmRlZFByb21pc2UyID0gZ3VhcmRlZEJlaGF2aW9yKCdjJywgMTAwKTtcbiAgICAgIGF3YWl0IHVuZ3VhcmRlZFByb21pc2UxO1xuICAgICAgYXdhaXQgdW5ndWFyZGVkUHJvbWlzZTI7XG4gICAgICBhd2FpdCB0ZXN0RmlsZUNvbnRlbnRzKCkuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKCdhY2InKTtcblxuICAgICAgLy8gbm93IHByb3ZlIHRoYXQgd2l0aCBhIGxvY2ssIHdlIGRvbid0IGdldCBhbnkgaW50ZXJsb3BlcnNcbiAgICAgIGNvbnN0IGd1YXJkID0gdXRpbC5nZXRMb2NrRmlsZUd1YXJkKGxvY2tGaWxlKTtcbiAgICAgIGNvbnN0IGd1YXJkUHJvbWlzZTEgPSBndWFyZChhc3luYyAoKSA9PiBhd2FpdCBndWFyZGVkQmVoYXZpb3IoJ2InLCA1MDApKTtcbiAgICAgIGNvbnN0IGd1YXJkUHJvbWlzZTIgPSBndWFyZChhc3luYyAoKSA9PiBhd2FpdCBndWFyZGVkQmVoYXZpb3IoJ2MnLCAxMDApKTtcbiAgICAgIGF3YWl0IGd1YXJkUHJvbWlzZTE7XG4gICAgICBhd2FpdCBndWFyZFByb21pc2UyO1xuICAgICAgYXdhaXQgdGVzdEZpbGVDb250ZW50cygpLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnYWNiYmMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGd1YXJkZWQgYmVoYXZpb3InLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBndWFyZCA9IHV0aWwuZ2V0TG9ja0ZpbGVHdWFyZChsb2NrRmlsZSk7XG4gICAgICBjb25zdCBndWFyZFByb21pc2UxID0gZ3VhcmQoYXN5bmMgKCkgPT4gYXdhaXQgZ3VhcmRlZEJlaGF2aW9yKCdoZWxsbycsIDUwMCkpO1xuICAgICAgY29uc3QgZ3VhcmRQcm9taXNlMiA9IGd1YXJkKGFzeW5jICgpID0+IGF3YWl0IGd1YXJkZWRCZWhhdmlvcignd29ybGQnLCAxMDApKTtcbiAgICAgIGNvbnN0IHJldDEgPSBhd2FpdCBndWFyZFByb21pc2UxO1xuICAgICAgY29uc3QgcmV0MiA9IGF3YWl0IGd1YXJkUHJvbWlzZTI7XG4gICAgICByZXQxLnNob3VsZC5lcWwoJ2hlbGxvJyk7XG4gICAgICByZXQyLnNob3VsZC5lcWwoJ3dvcmxkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRpbWUgb3V0IGlmIHRoZSBsb2NrIGlzIG5vdCByZWxlYXNlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMudGltZW91dCg1MDAwKTtcbiAgICAgIGNvbnN0IGd1YXJkID0gdXRpbC5nZXRMb2NrRmlsZUd1YXJkKGxvY2tGaWxlLCB7dGltZW91dDogMC41fSk7XG4gICAgICBjb25zdCBwMSA9IGd1YXJkKGFzeW5jICgpID0+IGF3YWl0IGd1YXJkZWRCZWhhdmlvcignaGVsbG8nLCAxMjAwKSk7XG4gICAgICBjb25zdCBwMiA9IGd1YXJkKGFzeW5jICgpID0+IGF3YWl0IGd1YXJkZWRCZWhhdmlvcignd29ybGQnLCAxMCkpO1xuICAgICAgYXdhaXQgcDIuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9ub3QgYWNxdWlyZSBsb2NrLyk7XG4gICAgICBhd2FpdCBwMS5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ2hlbGxvJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0aWxsIHJlbGVhc2UgbG9jayBpZiBndWFyZGVkIGJlaGF2aW9yIGZhaWxzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy50aW1lb3V0KDUwMDApO1xuICAgICAgY29uc3QgZ3VhcmQgPSB1dGlsLmdldExvY2tGaWxlR3VhcmQobG9ja0ZpbGUpO1xuICAgICAgY29uc3QgcDEgPSBndWFyZChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IEIuZGVsYXkoNTAwKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQnKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcDIgPSBndWFyZChhc3luYyAoKSA9PiBhd2FpdCBndWFyZGVkQmVoYXZpb3IoJ3dvcmxkJywgMTAwKSk7XG4gICAgICBhd2FpdCBwMS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2JhZC8pO1xuICAgICAgYXdhaXQgcDIuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKCd3b3JsZCcpO1xuICAgIH0pO1xuICB9KTtcblxufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxlQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxJQUFBLEdBQUFDLHVCQUFBLENBQUFMLE9BQUE7QUFDQSxJQUFBTSxNQUFBLEdBQUFOLE9BQUE7QUFBdUMsU0FBQU8seUJBQUFDLENBQUEsNkJBQUFDLE9BQUEsbUJBQUFD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
