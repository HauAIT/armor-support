"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.SecureValuesPreprocessor = exports.SECURE_VALUES_PREPROCESSOR = void 0;
require("source-map-support/register");
var _fs = _interopRequireDefault(require("./fs"));
var _lodash = _interopRequireDefault(require("lodash"));
const DEFAULT_REPLACER = '**SECURE**';
function isLogFilterRegex(value) {
  return 'pattern' in value;
}
class SecureValuesPreprocessor {
  constructor() {
    this._rules = [];
  }
  get rules() {
    return this._rules;
  }
  parseRule(rule) {
    let pattern;
    let replacer = DEFAULT_REPLACER;
    let flags = ['g'];
    if (_lodash.default.isString(rule)) {
      if (rule.length === 0) {
        throw new Error(`${JSON.stringify(rule)} -> The value must not be empty`);
      }
      pattern = `\\b${_lodash.default.escapeRegExp(rule)}\\b`;
    } else if (_lodash.default.isPlainObject(rule)) {
      if (isLogFilterRegex(rule)) {
        if (!_lodash.default.isString(rule.pattern) || rule.pattern.length === 0) {
          throw new Error(`${JSON.stringify(rule)} -> The value of 'pattern' must be a valid non-empty string`);
        }
        pattern = rule.pattern;
      } else if (_lodash.default.has(rule, 'text')) {
        if (!_lodash.default.isString(rule.text) || rule.text.length === 0) {
          throw new Error(`${JSON.stringify(rule)} -> The value of 'text' must be a valid non-empty string`);
        }
        pattern = `\\b${_lodash.default.escapeRegExp(rule.text)}\\b`;
      }
      if (!pattern) {
        throw new Error(`${JSON.stringify(rule)} -> Must either have a field named 'pattern' or 'text'`);
      }
      if (_lodash.default.has(rule, 'flags')) {
        for (const flag of ['i', 'g', 'm', 's', 'u', 'y']) {
          if (_lodash.default.includes(rule.flags, flag)) {
            flags.push(flag);
          }
        }
        flags = _lodash.default.uniq(flags);
      }
      if (_lodash.default.isString(rule.replacer)) {
        replacer = rule.replacer;
      }
    } else {
      throw new Error(`${JSON.stringify(rule)} -> Must either be a string or an object`);
    }
    return {
      pattern: new RegExp(pattern, flags.join('')),
      replacer
    };
  }
  async loadRules(source) {
    let rules;
    if (_lodash.default.isArray(source)) {
      rules = source;
    } else {
      if (!(await _fs.default.exists(source))) {
        throw new Error(`'${source}' does not exist or is not accessible`);
      }
      try {
        rules = JSON.parse(await _fs.default.readFile(source, 'utf8'));
      } catch (e) {
        throw new Error(`'${source}' must be a valid JSON file. Original error: ${e.message}`);
      }
      if (!_lodash.default.isArray(rules)) {
        throw new Error(`'${source}' must contain a valid JSON array`);
      }
    }
    const issues = [];
    this._rules = [];
    for (const rule of rules) {
      try {
        this._rules.push(this.parseRule(rule));
      } catch (e) {
        issues.push(e.message);
      }
    }
    return issues;
  }
  preprocess(str) {
    if (this._rules.length === 0 || !_lodash.default.isString(str)) {
      return str;
    }
    let result = str;
    for (const rule of this._rules) {
      result = result.replace(rule.pattern, rule.replacer);
    }
    return result;
  }
}
exports.SecureValuesPreprocessor = SecureValuesPreprocessor;
const SECURE_VALUES_PREPROCESSOR = exports.SECURE_VALUES_PREPROCESSOR = new SecureValuesPreprocessor();
var _default = exports.default = SECURE_VALUES_PREPROCESSOR;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL2xvZy1pbnRlcm5hbC5qcyIsIm5hbWVzIjpbIl9mcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2xvZGFzaCIsIkRFRkFVTFRfUkVQTEFDRVIiLCJpc0xvZ0ZpbHRlclJlZ2V4IiwidmFsdWUiLCJTZWN1cmVWYWx1ZXNQcmVwcm9jZXNzb3IiLCJjb25zdHJ1Y3RvciIsIl9ydWxlcyIsInJ1bGVzIiwicGFyc2VSdWxlIiwicnVsZSIsInBhdHRlcm4iLCJyZXBsYWNlciIsImZsYWdzIiwiXyIsImlzU3RyaW5nIiwibGVuZ3RoIiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZXNjYXBlUmVnRXhwIiwiaXNQbGFpbk9iamVjdCIsImhhcyIsInRleHQiLCJmbGFnIiwiaW5jbHVkZXMiLCJwdXNoIiwidW5pcSIsIlJlZ0V4cCIsImpvaW4iLCJsb2FkUnVsZXMiLCJzb3VyY2UiLCJpc0FycmF5IiwiZnMiLCJleGlzdHMiLCJwYXJzZSIsInJlYWRGaWxlIiwiZSIsIm1lc3NhZ2UiLCJpc3N1ZXMiLCJwcmVwcm9jZXNzIiwic3RyIiwicmVzdWx0IiwicmVwbGFjZSIsImV4cG9ydHMiLCJTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUiIsIl9kZWZhdWx0IiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiLi4vLi4iLCJzb3VyY2VzIjpbImxpYi9sb2ctaW50ZXJuYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJy4vZnMnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgREVGQVVMVF9SRVBMQUNFUiA9ICcqKlNFQ1VSRSoqJztcblxuLyoqXG4gKiBUeXBlIGd1YXJkIGZvciBsb2cgZmlsdGVyIHR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZVxuICogQHJldHVybnMge3ZhbHVlIGlzIGltcG9ydCgnYXJtb3ItdHlwZXMnKS5Mb2dGaWx0ZXJSZWdleH1cbiAqL1xuZnVuY3Rpb24gaXNMb2dGaWx0ZXJSZWdleCAodmFsdWUpIHtcbiAgcmV0dXJuICdwYXR0ZXJuJyBpbiB2YWx1ZTtcbn1cblxuY2xhc3MgU2VjdXJlVmFsdWVzUHJlcHJvY2Vzc29yIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuX3J1bGVzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0FycmF5PFNlY3VyZVZhbHVlUHJlcHJvY2Vzc2luZ1J1bGU+fSBUaGUgbGlzdCBvZiBzdWNjZXNzZnVsbHlcbiAgICogcGFyc2VkIHByZXByb2Nlc3NpbmcgcnVsZXNcbiAgICovXG4gIGdldCBydWxlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3J1bGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyBzaW5nbGUgcnVsZSBmcm9tIHRoZSBnaXZlbiBKU09OIGZpbGVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW1wb3J0KCdhcm1vci10eXBlcycpLkxvZ0ZpbHRlcn0gcnVsZSBUaGUgcnVsZSBtaWdodCBlaXRoZXIgYmUgcmVwcmVzZW50ZWQgYXMgYSBzaW5nbGUgc3RyaW5nXG4gICAqIG9yIGEgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBwYXJzaW5nIHRoZSBydWxlXG4gICAqIEByZXR1cm5zIHtTZWN1cmVWYWx1ZVByZXByb2Nlc3NpbmdSdWxlfSBUaGUgcGFyc2VkIHJ1bGVcbiAgICovXG4gIHBhcnNlUnVsZSAocnVsZSkge1xuICAgIGxldCBwYXR0ZXJuO1xuICAgIGxldCByZXBsYWNlciA9IERFRkFVTFRfUkVQTEFDRVI7XG4gICAgbGV0IGZsYWdzID0gWydnJ107XG4gICAgaWYgKF8uaXNTdHJpbmcocnVsZSkpIHtcbiAgICAgIGlmIChydWxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IFRoZSB2YWx1ZSBtdXN0IG5vdCBiZSBlbXB0eWApO1xuICAgICAgfVxuICAgICAgcGF0dGVybiA9IGBcXFxcYiR7Xy5lc2NhcGVSZWdFeHAocnVsZSl9XFxcXGJgO1xuICAgIH0gZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KHJ1bGUpKSB7XG4gICAgICBpZiAoaXNMb2dGaWx0ZXJSZWdleChydWxlKSkge1xuICAgICAgICBpZiAoIV8uaXNTdHJpbmcocnVsZS5wYXR0ZXJuKSB8fCBydWxlLnBhdHRlcm4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IFRoZSB2YWx1ZSBvZiAncGF0dGVybicgbXVzdCBiZSBhIHZhbGlkIG5vbi1lbXB0eSBzdHJpbmdgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuID0gcnVsZS5wYXR0ZXJuO1xuICAgICAgfSBlbHNlIGlmIChfLmhhcyhydWxlLCAndGV4dCcpKSB7XG4gICAgICAgIGlmICghXy5pc1N0cmluZyhydWxlLnRleHQpIHx8IHJ1bGUudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShydWxlKX0gLT4gVGhlIHZhbHVlIG9mICd0ZXh0JyBtdXN0IGJlIGEgdmFsaWQgbm9uLWVtcHR5IHN0cmluZ2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gPSBgXFxcXGIke18uZXNjYXBlUmVnRXhwKHJ1bGUudGV4dCl9XFxcXGJgO1xuICAgICAgfVxuICAgICAgaWYgKCFwYXR0ZXJuKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShydWxlKX0gLT4gTXVzdCBlaXRoZXIgaGF2ZSBhIGZpZWxkIG5hbWVkICdwYXR0ZXJuJyBvciAndGV4dCdgXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmhhcyhydWxlLCAnZmxhZ3MnKSkge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnMjQWR2YW5jZWRfc2VhcmNoaW5nX3dpdGhfZmxhZ3NfMlxuICAgICAgICBmb3IgKGNvbnN0IGZsYWcgb2YgWydpJywgJ2cnLCAnbScsICdzJywgJ3UnLCAneSddKSB7XG4gICAgICAgICAgaWYgKF8uaW5jbHVkZXMocnVsZS5mbGFncywgZmxhZykpIHtcbiAgICAgICAgICAgIGZsYWdzLnB1c2goZmxhZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZsYWdzID0gXy51bmlxKGZsYWdzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF8uaXNTdHJpbmcocnVsZS5yZXBsYWNlcikpIHtcbiAgICAgICAgcmVwbGFjZXIgPSBydWxlLnJlcGxhY2VyO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IE11c3QgZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuIG9iamVjdGApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXR0ZXJuOiBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzLmpvaW4oJycpKSxcbiAgICAgIHJlcGxhY2VyLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgcnVsZXMgZnJvbSB0aGUgZ2l2ZW4gSlNPTiBmaWxlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfGltcG9ydCgnYXJtb3ItdHlwZXMnKS5Mb2dGaWx0ZXJzQ29uZmlnfSBzb3VyY2UgVGhlIGZ1bGwgcGF0aCB0byB0aGUgSlNPTiBmaWxlIGNvbnRhaW5pbmcgc2VjdXJlXG4gICAqIHZhbHVlcyByZXBsYWNlbWVudCBydWxlcyBvciB0aGUgcnVsZXMgdGhlbXNlbHZlcyByZXByZXNlbnRlZCBhcyBhbiBhcnJheVxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGZvcm1hdCBvZiB0aGUgc291cmNlIGZpbGUgaXMgaW52YWxpZCBvclxuICAgKiBpdCBkb2VzIG5vdCBleGlzdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmdbXT59IFRoZSBsaXN0IG9mIGlzc3VlcyBmb3VuZCB3aGlsZSBwYXJzaW5nIGVhY2ggcnVsZS5cbiAgICogQW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZCBpZiBubyBydWxlIHBhcnNpbmcgaXNzdWVzIHdlcmUgZm91bmRcbiAgICovXG4gIGFzeW5jIGxvYWRSdWxlcyAoc291cmNlKSB7XG4gICAgbGV0IHJ1bGVzO1xuICAgIGlmIChfLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcnVsZXMgPSBzb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghKGF3YWl0IGZzLmV4aXN0cyhzb3VyY2UpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3NvdXJjZX0nIGRvZXMgbm90IGV4aXN0IG9yIGlzIG5vdCBhY2Nlc3NpYmxlYCk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBydWxlcyA9IEpTT04ucGFyc2UoYXdhaXQgZnMucmVhZEZpbGUoc291cmNlLCAndXRmOCcpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtzb3VyY2V9JyBtdXN0IGJlIGEgdmFsaWQgSlNPTiBmaWxlLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICBpZiAoIV8uaXNBcnJheShydWxlcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtzb3VyY2V9JyBtdXN0IGNvbnRhaW4gYSB2YWxpZCBKU09OIGFycmF5YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgdGhpcy5fcnVsZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgcnVsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuX3J1bGVzLnB1c2godGhpcy5wYXJzZVJ1bGUocnVsZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpc3N1ZXMucHVzaChlLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHNlY3VyZSB2YWx1ZXMgcmVwbGFjZW1lbnQgaW5zaWRlIHRoZSBnaXZlbiBzdHJpbmdcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBwcmV2aW91c2x5IGxvYWRlZCBydWxlcy4gTm8gcmVwbGFjZW1lbnQgaXMgbWFkZVxuICAgKiBpZiB0aGVyZSBhcmUgbm8gcnVsZXMgb3IgdGhlIGdpdmVuIHZhbHVlIGlzIG5vdCBhIHN0cmluZ1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gbWFrZSByZXBsYWNlbWVudHMgaW5cbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHN0cmluZyB3aXRoIHJlcGxhY2VtZW50cyBtYWRlXG4gICAqL1xuICBwcmVwcm9jZXNzIChzdHIpIHtcbiAgICBpZiAodGhpcy5fcnVsZXMubGVuZ3RoID09PSAwIHx8ICFfLmlzU3RyaW5nKHN0cikpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IHN0cjtcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgdGhpcy5fcnVsZXMpIHtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKHJ1bGUucGF0dGVybiwgcnVsZS5yZXBsYWNlcik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuY29uc3QgU0VDVVJFX1ZBTFVFU19QUkVQUk9DRVNTT1IgPSBuZXcgU2VjdXJlVmFsdWVzUHJlcHJvY2Vzc29yKCk7XG5cbmV4cG9ydCB7U0VDVVJFX1ZBTFVFU19QUkVQUk9DRVNTT1IsIFNlY3VyZVZhbHVlc1ByZXByb2Nlc3Nvcn07XG5leHBvcnQgZGVmYXVsdCBTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUjtcblxuLyoqXG4gKiBAdHlwZWRlZiBTZWN1cmVWYWx1ZVByZXByb2Nlc3NpbmdSdWxlXG4gKiBAcHJvcGVydHkge1JlZ0V4cH0gcGF0dGVybiBUaGUgcGFyc2VkIHBhdHRlcm4gd2hpY2ggaXMgZ29pbmcgdG8gYmUgdXNlZCBmb3IgcmVwbGFjZW1lbnRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcmVwbGFjZXJdIFRoZSByZXBsYWNlciB2YWx1ZSB0byB1c2UuIEJ5IGRlZmF1bHRcbiAqIGVxdWFscyB0byBgREVGQVVMVF9TRUNVUkVfUkVQTEFDRVJgXG4gKi9cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxHQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNRSxnQkFBZ0IsR0FBRyxZQUFZO0FBT3JDLFNBQVNDLGdCQUFnQkEsQ0FBRUMsS0FBSyxFQUFFO0VBQ2hDLE9BQU8sU0FBUyxJQUFJQSxLQUFLO0FBQzNCO0FBRUEsTUFBTUMsd0JBQXdCLENBQUM7RUFDN0JDLFdBQVdBLENBQUEsRUFBSTtJQUNiLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEVBQUU7RUFDbEI7RUFNQSxJQUFJQyxLQUFLQSxDQUFBLEVBQUk7SUFDWCxPQUFPLElBQUksQ0FBQ0QsTUFBTTtFQUNwQjtFQVVBRSxTQUFTQSxDQUFFQyxJQUFJLEVBQUU7SUFDZixJQUFJQyxPQUFPO0lBQ1gsSUFBSUMsUUFBUSxHQUFHVixnQkFBZ0I7SUFDL0IsSUFBSVcsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDO0lBQ2pCLElBQUlDLGVBQUMsQ0FBQ0MsUUFBUSxDQUFDTCxJQUFJLENBQUMsRUFBRTtNQUNwQixJQUFJQSxJQUFJLENBQUNNLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDckIsTUFBTSxJQUFJQyxLQUFLLENBQUUsR0FBRUMsSUFBSSxDQUFD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
